(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{1420:function(t,e,n){"use strict";n.r(e);var a=n(2845),i=n(2132);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);n(2717);var s=n(0),o=n(2719),l=n.n(o),u=Object(s.a)(i.default,a.a,a.b,!1,null,"03683c7c",null);"function"==typeof l.a&&l()(u),u.options.__file="edit.vue",e.default=u.exports},1541:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkExistsMultiple=e.download=e.checkExists=e.getArchive=e.extract=e.copy=e.rename=e.create=e.save=e.read=void 0;var a=s(n(11)),i=n(10),r=s(n(49));function s(t){return t&&t.__esModule?t:{default:t}}var o="/CMD_FILE_MANAGER",l=(e.read=r.default.get({url:o,id:"FILE_CONTENT",params:{action:"edit"},schema:{path:r.default.REQUIRED_STRING},after:function(t){return t.flow(t.moveProp({DIRECTORY:"dir",FILENAME:"filename",TEXT:"text"}),t.mapProp("text",t.convert.toAppText),t.deleteProp("BODY"))}}),e.save=r.default.post({url:o,noQueryArg:!0,params:{action:"edit",json:!0},schema:{path:r.default.REQUIRED_STRING,filename:r.default.REQUIRED_STRING,text:r.default.REQUIRED_STRING}})),u=(e.create=l.extend({params:{text:""}}),e.rename=r.default.post({url:o,params:{action:"rename"},schema:{old:r.default.REQUIRED_STRING,filename:r.default.REQUIRED_STRING,path:r.default.REQUIRED_STRING}})),c=(e.copy=u.extend({params:{action:"copy",json:!0},schema:{overwrite:r.default.REQUIRED_BOOL}}),e.extract=r.default.post({url:o,params:{action:"extract",page:2},schema:{path:r.default.REQUIRED_STRING,directory:r.default.REQUIRED_STRING}}),e.getArchive=r.default.get({id:"ARCHIVE",url:o,params:{action:"extract",json:!0},schema:{path:r.default.REQUIRED_STRING},response:[],after:function(t){return t.flow(t.getProp("output"),t.convert.toLines,t.filter(t.notEmpty))}}),e.checkExists=r.default.get({url:o,id:"FILE_EXISTS",response:!1,params:{action:"exists"},schema:{path:r.default.REQUIRED_STRING},after:function(t){return t.flow(t.getProp("exists"),t.isEqual("1"))}}),e.download=function(t){var e=(0,i.State)("app.tokens.SESSION_ID"),n=""+o+t.truepath+"?noredirect=true&X-DirectAdmin-Session-ID="+e,a=document.createElement("a");a.href=n,a.setAttribute("download",t.name),a.setAttribute("_target","blank"),document.body.appendChild(a),a.click(),a.remove()},e.checkExistsMultiple=r.default.get({url:o,id:"FILES_EXISTS",params:{action:"multiple_exist"},schema:{file:r.default.ROWS},response:[],mapResponse:function(t){var e=t.paths;return(0,a.default)(e).filter(function(t){return"1"===e[t].exists})}}));window.checkExistsMultiple=c},2132:function(t,e,n){"use strict";n.r(e);var a=n(2133),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e.default=i.a},2133:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=u(n(18)),i=u(n(16)),r=u(n(17)),s=n(1541),o=u(n(1512)),l=u(n(2268));function u(t){return t&&t.__esModule?t:{default:t}}e.default={components:{FileExistsConfirmationDialog:l.default,InputTextEditor:o.default},beforeRouteEnter:function(t,e,n){var a=this;return(0,r.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.read)({path:t.query.path});case 3:n(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n(e.t0);case 9:case"end":return e.stop()}},e,a,[[0,6]])}))()},api:[{command:s.read,bind:"file"}],data:function(){return{content:"",filename:""}},created:function(){this.content=this.file.text.trim(),this.filename=this.file.filename},computed:{file:function(){return this.$api.file},path:function(){return"/"===this.file.path[this.file.path.length-1]?this.file.path.slice(0,-1):this.file.path},editorMode:function(){var t=this.file.filename.split(".");return{html:"html",js:"javascript",css:"css",php:"php",pl:"perl",ini:"ini",sql:"sql",json:"json"}[(0,a.default)(t,2)[1]]||"text"}},methods:{save:function(){var t=this;return(0,r.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.file.filename!==t.filename,!e.t0){e.next=5;break}return e.next=4,t.checkFileExists();case 4:e.t0=e.sent;case 5:e.t0?t.$dialog("FILE_EXISTS_CONFIRMATION_DIALOG").open():t.confirmedSave();case 7:case"end":return e.stop()}},e,t)}))()},confirmedSave:function(){(0,s.save)({path:this.file.path,filename:this.filename,text:this.content})},checkFileExists:function(){return(0,s.checkExists)({path:this.path+"/"+this.filename})}}}},2134:function(t,e,n){var a=n(2718);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(5).default)("f861bcd4",a,!0,{})},2268:function(t,e,n){"use strict";n.r(e);var a=n(0),i=Object(a.a)({},function(t,e){var n=e._c;return n("ui-dialog",{attrs:{id:"FILE_EXISTS_CONFIRMATION_DIALOG",theme:"danger",noCloseBtn:"",noCloseIcon:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Confirm File Save")]),e._v(" "),n("translate",{attrs:{slot:"content","translate-params":{filename:e.props.filename}},slot:"content"},[e._v("\n        File %{ filename } already exists. Confirm overwrite?\n    ")]),e._v(" "),n("template",{slot:"buttons"},[n("ui-button",{attrs:{theme:"danger"},on:{click:e.listeners.overwrite}},[n("translate",[e._v("Yes")])],1),e._v(" "),n("ui-button",{attrs:{theme:"neutral"},on:{click:e.listeners.discard}},[n("translate",[e._v("No")])],1)],1)],2)},[],!0,null,null,null);i.options.__file="file-exists-dialog.vue";e.default=i.exports},2717:function(t,e,n){"use strict";var a=n(2134);n.n(a).a},2718:function(t,e,n){(t.exports=n(4)(!0)).push([t.i,"textarea[data-v-03683c7c]{width:100%;min-height:60vh}","",{version:3,sources:["/usr/local/directadmin/data/skins/evolution/src/js/pages/user/filemanager/edit.vue"],names:[],mappings:"AAmIA,0BACI,WACA,eAAgB,CAAA",file:"edit.vue?vue&type=style&index=0&id=03683c7c&scoped=true&lang=css&",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntextarea {\n    width: 100%;\n    min-height: 60vh;\n}\n"],sourceRoot:""}])},2719:function(t,e){},2845:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[n("app-page-section",[n("ui-form-element",{attrs:{underline:!1}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Save As\n            ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}},[n("ui-button",{attrs:{slot:"additions:right",theme:"safe"},on:{click:t.save},slot:"additions:right"},[n("translate",[t._v("Save")])],1)],1)],1),t._v(" "),n("input-text-editor",{attrs:{mode:t.editorMode},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}},[n("template",{slot:"header"},[t._v("\n                "+t._s(t.path)+"/"+t._s(t.file.filename)+"\n            ")])],2)],1),t._v(" "),n("file-exists-confirmation-dialog",{on:{overwrite:t.confirmedSave,discard:function(e){t.$dialog("FILE_EXISTS_CONFIRMATION_DIALOG").close()}}})],1)},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})}}]);